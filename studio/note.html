<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Note Builder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Markdown renderer -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link rel="stylesheet" href="style.css" />
  <script defer src="app.js"></script>
</head>
<body>
  <div class="app">
    <header>
        <div class="app-title">
          <span class="logo-dot"></span>
          Note Builder
        </div>
      <div>
    <div class="top-row">
      <button id="insertBtn" class="btn btn-primary">
        ‚úö Ch√®n / ch·ªânh s·ª≠a
      </button>

      <div class="desktop-tools">
        <button class="btn btn-ghost btn-copy">üìã Copy</button>
        <button class="btn btn-ghost btn-export">‚¨á Export</button>
        <button class="btn btn-ghost btn-import">‚¨Ü Import</button>
        <input id="importInput" type="file" accept=".md,.markdown,.txt" class="hidden">
      </div>
    </div>
      </div>
    </header>



    <main class="main">
      <!-- Mobile Tools Panel -->
      <section id="toolsPanel">
        <div class="tools-grid">
          <button class="btn btn-ghost btn-copy">üìã Copy</button>
          <button class="btn btn-ghost btn-export">‚¨á Export</button>
          <button class="btn btn-ghost btn-import">‚¨Ü ·ªämport</button>
        </div>
        <p class="tools-note">
          Tip: B·∫°n c√≥ th·ªÉ nh·∫≠p file README.md, ch·ªânh s·ª≠a tr·ª±c ti·∫øp code v√† xem k·∫øt qu·∫£ ·ªü tab "Xem tr∆∞·ªõc".
        </p>
      </section>
      <div class="panes">
        <section class="pane pane-code" data-view="code">
          <div class="pane-header">
            <div class="pane-header-title">
              <strong>Code Markdown</strong>
              <span class="pane-header-badge" id="currentFileName">README.md</span>
            </div>
          </div>
          <textarea id="markdownInput" placeholder="# Ti√™u ƒë·ªÅ b·∫£n tin
M√¥ t·∫£ ng·∫Øn v·ªÅ b·∫£n tin c·ªßa b·∫°n...

## T√≠nh nƒÉng
- T√≠nh nƒÉng 1
- T√≠nh nƒÉng 2

## C√°c b∆∞·ªõc th·ª±c hi·ªán
\`\`\`bash
npm install
npm run dev
\`\`\`
"></textarea>
        </section>

        <section class="pane pane-preview" data-view="preview">
          <div class="pane-header">
            <div class="pane-header-title">
              <strong>Xem tr∆∞·ªõc</strong>
              <span class="pane-header-badge">Rendered</span>
            </div>
          </div>
          <div id="preview"></div>
        </section>
      </div>


    </main>
  </div>

  <!-- Mobile bottom tabs -->
  <div class="mobile-tabs">
    <button data-target="code">
      <span class="icon">‚å®Ô∏è</span>
      Code
    </button>
    <button data-target="preview">
      <span class="icon">üëÅÔ∏è</span>
      Xem tr∆∞·ªõc
    </button>
    <button class="active" data-target="tools">
      <span class="icon">üõ†Ô∏è</span>
      C√¥ng c·ª•
    </button>
  </div>

  <!-- Insert Modal -->
  <div id="insertModalBackdrop" class="modal-backdrop hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">Ch√®n n·ªôi dung</div>
        <button id="closeInsertModal" class="modal-close">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="modal-tabs">
          <button class="modal-tab-btn active" data-section="section-text">‚úèÔ∏è Text</button>
          <button class="modal-tab-btn" data-section="section-list">‚ò∞ Danh s√°ch</button>
          <button class="modal-tab-btn" data-section="section-video">üé¨ Video</button>
          <button class="modal-tab-btn" data-section="section-image">üñº ·∫¢nh</button>
          <button class="modal-tab-btn" data-section="section-link">üîó Link</button>

        </div>

        <div>
          <!-- TEXT -->
          <div id="section-text" class="modal-section active">
            <div class="field">
              <label for="textType">Lo·∫°i text</label>
              <select id="textType">
                <option value="p">ƒêo·∫°n vƒÉn th∆∞·ªùng</option>
                <option value="h1">Ti√™u ƒë·ªÅ H1 (#)</option>
                <option value="h2">Ti√™u ƒë·ªÅ H2 (##)</option>
                <option value="h3">Ti√™u ƒë·ªÅ H3 (###)</option>
              </select>
            </div>
            <div class="field">
              <label for="textContent">N·ªôi dung</label>
              <textarea id="textContent" placeholder="Nh·∫≠p n·ªôi dung..."></textarea>
            </div>
            <div class="modal-footer">
              <button id="insertTextBtn" class="btn btn-primary">Ch√®n text</button>
            </div>
          </div>

          <!-- IMAGE -->
          <div id="section-image" class="modal-section">
            <div class="field">
              <label>Ch·ªçn ·∫¢nh</label>
              <div class="image-actions">
                <button id="imagePasteBtn" type="button" class="btn btn-ghost btn-sm">
                  üìé D√°n link ·∫£nh
                </button>
                <button id="imageUploadBtn" type="button" class="btn btn-ghost btn-sm">
                  ‚¨Ü Upload ·∫£nh
                </button>
                <input id="imageFile" type="file" accept="image/*" class="hidden" />
              </div>
            </div>
            <div class="field">
              <label for="imageUrl">URL ·∫£nh ƒë√£ ch·ªçn / upload</label>
              <input id="imageUrl" type="url" placeholder="https://..." />
              <div class="help-text">
                N√∫t "Upload ·∫£nh" s·∫Ω t·ª± upload l√™n imgbb v√† ƒëi·ªÅn URL v√†o ƒë√¢y.
              </div>
            </div>
            <div class="field">
              <label for="imageAlt">Alt text (tu·ª≥ ch·ªçn)</label>
              <input id="imageAlt" type="text" placeholder="M√¥ t·∫£ ng·∫Øn cho ·∫£nh..." />
            </div>
            <div class="modal-footer">
              <button id="insertImageBtn" class="btn btn-primary">Ch√®n ·∫£nh</button>
            </div>
          </div>

<!-- VIDEO -->
<div id="section-video" class="modal-section">
  <div class="field">
    <label for="videoUrl">URL video (YouTube, v.v.)</label>
    <input id="videoUrl" type="url" placeholder="https://youtube.com/watch?v=..." />
  </div>

  <!-- NEW: gi·ªëng ph·∫ßn IMAGE -->
  <div class="field">
    <label>Ch·ªçn ·∫¢nh thumbnail</label>
    <div class="image-actions">
      <button id="videoThumbPasteBtn" type="button" class="btn btn-ghost btn-sm">
        üìé D√°n link ·∫£nh
      </button>
      <button id="videoThumbUploadBtn" type="button" class="btn btn-ghost btn-sm">
        ‚¨Ü Upload ·∫£nh
      </button>
      <input id="videoThumbFile" type="file" accept="image/*" class="hidden" />
    </div>
  </div>

  <div class="field">
    <label for="videoThumbUrl">URL thumbnail ƒë√£ ch·ªçn / upload</label>
    <input id="videoThumbUrl" type="url" placeholder="https://..." />
  </div>

  <div class="field">
    <label for="videoAlt">Alt text (tu·ª≥ ch·ªçn)</label>
    <input id="videoAlt" type="text" placeholder="V√≠ d·ª•: Xem video demo" />
    <div class="help-text">
      S·∫Ω ch√®n d·∫°ng: <code>[![alt](thumbnail)](video-url)</code>
    </div>
  </div>

  <div class="modal-footer">
    <button id="insertVideoBtn" class="btn btn-primary">Ch√®n video</button>
  </div>
</div>


          <!-- LINK -->
          <div id="section-link" class="modal-section">
            <div class="field">
              <label for="linkText">T√™n hi·ªÉn th·ªã</label>
              <input id="linkText" type="text" placeholder="V√≠ d·ª•: ƒê·ªçc chi ti·∫øt" />
            </div>
	    <div class="field">
              <label for="typeUrl">T√πy ch·ªçn</label>
              <select id="typeUrl" type="radio" value="0"><option value="0">None</option><option value="1">Tin t·ª©c</option><option value="2">·ª®ng d·ª•ng</option></select>
            </div>
            <div class="field">
              <label for="linkUrl">URL</label>
              <input id="linkUrl" type="url" placeholder="https://..." />
              <div class="help-text">
                ƒêi·ªÅn t√™n file.md n·∫øu ch√®n tin t·ª©c, ƒëi·ªÅn bundleId n·∫øu ch√®n ·ª©ng d·ª•ng.
              </div>
            </div>
            <div class="modal-footer">
              <button id="insertLinkBtn" class="btn btn-primary">Ch√®n link</button>
            </div>
          </div>

          <!-- LIST -->
          <div id="section-list" class="modal-section">
            <div class="field">
              <label for="listType">Lo·∫°i danh s√°ch</label>
              <select id="listType">
                <option value="unordered">D·∫•u ch·∫•m tr√≤n (-)</option>
                <option value="ordered">ƒê√°nh s·ªë (1.)</option>
              </select>
            </div>
            <div class="field">
              <label for="listItems">C√°c m·ª•c (m·ªói d√≤ng l√† 1 item)</label>
              <textarea id="listItems" placeholder="Item 1
Item 2
Item 3"></textarea>
            </div>
            <div class="modal-footer">
              <button id="insertListBtn" class="btn btn-primary">Ch√®n danh s√°ch</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<!-- IMPORT WARNING POPUP -->
<div id="importPopup" class="modal-backdrop hidden">
  <div class="modal" style="max-width:360px;">
    <div class="modal-header">
      <div class="modal-title">D·ªØ li·ªáu hi·ªán c√≥ s·∫Ω b·ªã ghi ƒë√®</div>
      <button id="importPopupClose" class="modal-close">‚úï</button>
    </div>

    <div class="modal-body" style="grid-template-columns:1fr;">
      <p>B·∫°n mu·ªën l√†m g√¨?</p>

      <div class="modal-footer" style="flex-direction:column; gap:6px;">
        <button id="importContinueBtn" class="btn btn-primary" style="width:100%;">Continue</button>
        <button id="importExportBtn" class="btn btn-ghost" style="width:100%;">‚¨á Export</button>
        <button id="importCopyBtn" class="btn btn-ghost" style="width:100%;">üìã Copy</button>
      </div>
    </div>
  </div>
</div>

  <!-- Toast -->
  <div id="toast" class="toast">
    <span class="toast-icon"></span>
    <span id="toastMessage"></span>
  </div>
</body>
</html>
