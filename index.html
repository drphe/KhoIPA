<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <!-- Tối ưu hiển thị trên iPhone / iPad -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <!-- Cho phép chạy như ứng dụng độc lập (WebClip / PWA) -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Kho IPA">

  <!-- Màu mặc định (sẽ bị thay đổi bằng JS theo theme) -->
  <meta name="theme-color" content="#ffffff">
  <meta name="background-color" content="#ffffff">

  <!-- Icon hiển thị -->
  <link rel="mask-icon" href="./icon/logo.svg" color="#000000">
  <link rel="icon" type="image/png" href="./icon/logo.png">
  <link rel="apple-touch-icon" href="./icon/logo.png">

  <!-- CSS -->
  <link rel="stylesheet" href="./common/style.css">
  <link rel="stylesheet" href="index.css">

  <title>Kho IPA MOD</title>

  <!-- JS tự đổi màu theo Light / Dark Mode -->
  <script>
  (function() {
    // Lấy hoặc tạo thẻ meta theme-color
    let themeMeta = document.querySelector('meta[name="theme-color"]');
    if (!themeMeta) {
      themeMeta = document.createElement('meta');
      themeMeta.setAttribute('name', 'theme-color');
      document.head.appendChild(themeMeta);
    }

    // Lấy hoặc tạo thẻ meta background-color
    let bgMeta = document.querySelector('meta[name="background-color"]');
    if (!bgMeta) {
      bgMeta = document.createElement('meta');
      bgMeta.setAttribute('name', 'background-color');
      document.head.appendChild(bgMeta);
    }

    // Hàm cập nhật màu theo theme
    function applyThemeColor(isDark) {
      if (isDark) {
        themeMeta.setAttribute('content', '#000000');
        bgMeta.setAttribute('content', '#000000');
        document.documentElement.style.backgroundColor = '#000000';
        document.body.style.backgroundColor = '#000000';
        document.body.style.color = '#ffffff';
      } else {
        themeMeta.setAttribute('content', '#ffffff');
        bgMeta.setAttribute('content', '#ffffff');
        document.documentElement.style.backgroundColor = '#ffffff';
        document.body.style.backgroundColor = '#ffffff';
        document.body.style.color = '#000000';
      }
    }

    // Theo dõi thay đổi chế độ hệ thống
    const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
    applyThemeColor(darkModeQuery.matches);
    darkModeQuery.addEventListener('change', e => applyThemeColor(e.matches));
  })();
  </script>
</head>
<body class="loading">
  <div id="loading">
    <img src="./common/assets/img/loading.gif" alt="loading">
    <p>Loading</p>
  </div>
  <div id="top">
    <div id="nav-bar" class="hide-border">
      <a href="../KhoIPA/repo.html" target = _blank class="" title="Add News/Apps">
        <i class="bi bi-pencil-square" style="font-size: 1.375rem;"></i>
      </a>
      <div id="title" class="hidden">
          <p>KHO IPA MOD</p>
      </div>
      <a href="https://github.com/drphe/KhoIPA" id="source-code">
<img src="https://komarev.com/ghpvc/?username=drphe&repo=KhoIPA&label=Views&color=blue&style=flat" alt="Repo Views">
      </a>
    </div>
  </div>
  <div id="main">
    <h1 id="title">KHO IPA MOD</h1>
    <div id="suggestions" class="section">
      <div class="header">
        <h2>Editor's</h2>
      </div>
    </div>
    <div id="repositories" class="section">
      <div class="header">
        <h2>Featured</h2>
      </div>
    </div>
  </div>
  <script src="index.js" type="module"></script>
</body>
</html>